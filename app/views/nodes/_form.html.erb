<%= form_for @node do |f| %>
  <% if @node.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@node.errors.count, "error") %> prohibited this product node from being saved:</h2>

      <ul>
      <% @node.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
<p>
<!-- SELECT NODE TYPE -->
<div class="col-md">
<div class="col-md-6">
  <p>
    <% @node_context = @node.parent
       @node_label = "Parent Node: "
       @button_text = "Choose A Different Parent Product Node" %>
    <%= render "node_chooser" %>
  </p>
  <% if @node.nodeType != nil %>
    <%= f.select :nodeType_id, 
          options_from_collection_for_select(NodeType.all, :id, :name, @node.nodeType.id),
          {:include_blank => true},
          {:class => "form-control"} %>
  <% else %>
    <%= f.select :nodeType_id, 
          options_from_collection_for_select(NodeType.all, :id, :name), 
          {:include_blank => true}, 
          {:class => "form-control"} %>
  <% end %>
  <br/>

  <%= f.text_area :name , options = {class: "form-control", cols: 40, rows: 1} %> 
</div>
<div class="col-md-6"
<!-- SELECT PARENT NODE -->  
part of
  <% if @node.parent != nil %>
    <%= f.select :parent_id, 
          options_from_collection_for_select(Node.all, :id, :name, @node.parent.id), 
          {:include_blank => true}, 
          {:class => "form-control"}  %>
  <% elsif @origin_node != nil %>
    <%= f.select :parent_id, 
          options_from_collection_for_select(Node.all, :id, :name, @origin_node.id), 
          {:include_blank => true}, 
          {:class => "form-control"}  %>
  <% else %>
    <%= f.select :parent_id, 
          options_from_collection_for_select(Node.all, :id, :name), 
          {:include_blank => true}, 
          {:class => "form-control"}  %>
  <% end %>
<br/>
</div>
<div class="col-md-12">
  <p>
  </br>
    <strong>Description:</strong><br/>
    <%= f.text_area :description, options = {class: "form-control"} %>
  </p>

<br/><br/>
<strong>Has Phases:</strong><br>

<!-- <em>(Hold CMD Key to select multiple)</em><br/>
<%#= collection_select(:phaseType, :id, PhaseType.all, :id, :name, {},{:multiple => true}) %>
<br/>
<br/> -->

  <%= f.submit 'Update Node', :class => 'btn btn-default' %>
  <% if @origin_node != nil %>
    <%= link_to 'Cancel', @origin_node %>
  <% else %>
    <%= link_to 'Cancel', @node %>
  <% end %>
</p>
<% end %>
</div>
</div>
