<% if @node.parent != nil %>
  <ol class="breadcrumb">
    <% if @node.parent.parent != nil %>
      <li><%= link_to Node.find(@node.parent.parent).name , @node.parent.parent %> </li>
    <% end %>
    <li> <%= link_to Node.find(@node.parent).name , @node.parent %></li>

  </ol>
<% end %>

    <h2><%= link_to @node.name, @node %> Feature Inventory</h2> 

<div class="table-responsive">
    <table class="table table-striped table-hover">
        <th>Feature</th>
        <th>Specification</th>
        <th>Delivery</th>
        <th>Current Dependencies</th>
        <th>Issues</th>
        <th>Priority</th>
        <th>Done?</th>
        <th>FDD</th>
        <% @completed = @terminalNodes.select {|s| s.status } %>
      <% @terminalNodes.each_with_index do |child, i|  %>
        <tr <% if child.status %>class="success"<% end %>>
          <% if child.nodeType.feature or child.nodeType.feature_organizer %>
            <td><%= link_to child.name, child %></td>
            <td></td>
          <% else %>
            <td><%= link_to child.parent.name, child.parent %></td>
            <td><%= link_to child.name, child %></td>
          <% end %>
          <td>
            <% if child.get_next_delivery != nil %>
              <%= child.get_next_delivery.string %>
            <% else %>
              <%= link_to 'Add Delivery Date', new_delivery_date_path(child) %>
            <% end %>
          </td>
          <td>
              <%= child.dependencies.count %>
          </td>
          <td></td>
            
              
            
          <td><% if !child.status %><%= i + 1 - @completed.count %><% end %></td>
          <td><%= child.status %></td>
          <td><%= child.created_at.strftime('%m/%d/%Y')%></td>
        </tr>
      <% end %>
    </table>
</div>